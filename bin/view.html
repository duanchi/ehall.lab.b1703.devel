<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<title>针对1月1日短信营业厅拨测统计的分析</title>

</head>
<body>
<h1>针对1月1日短信营业厅拨测统计的分析</h1>

<blockquote><p>本次分析的数据依据</p>

<ul>
<li>总部网运7省: 北京 四川 天津 辽宁 上海 广东 浙江</li>
<li>1月1日拨测分析数据明细.rar <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></li>
<li>总部侧SP10010拨测2015年1月1日.xls <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></li>
<li>应用处理数据.xlsx <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></li>
<li>网运侧提供的2014年12月1日提供的拨测号码收集表</li>
<li>ECS短信营业厅原始在信网关、BSS/CBSS交互日志</li>
<li>ECS短信营业厅生产数据库数据</li>
</ul>
</blockquote>

<h2>1. 短信营业厅侧整体情况分析</h2>

<p>针对短信营业厅应用侧的分析包括三个环节: 接收到原始网关数据部分，应用业务处理部分，业务处理结果短信下发部分</p>

<h3>接收到原始网关数据分析</h3>

<blockquote><p>总部短信营业厅接收上行原始请求与网运部门拨测成功数量基本一致，接收成功率100%（注：广东SP10010上、下行均不通过总部短厅，业务数据明细通过FTP提供）。</p></blockquote>

<h3>应用业务处理数据分析</h3>

<blockquote><p>总部短信营业厅中短厅业务接收请求量与短厅应用处理量及短厅下行请求量一致，成功率100%。</p></blockquote>

<h3>业务处理结果短信下发数据分析</h3>

<blockquote><p>拨测接收成功量比短厅下行请求量少，初步分析网关同步接收成功率为100%，网关返回用户接收状态报告在排查中。</p></blockquote>

<h2>2. 针对出现问题的分析</h2>

<h3>上行量 与 业务处理量不一致</h3>

<blockquote><p>总部短信营业厅为了防止用户恶意上行短信至10010、或由于用户手机APP恶意上行短信至10010，故对一定之间范围内频繁上行短信的用户，在业务处理侧进行了屏蔽，具体表现为连续4小时内发送短信超过300条的用户，在接收到用户上行短信后不送往业务侧处理，也不下行短信。</p>

<p>为了确认短信量不一致是不是这个原因，将本次拨测的号码与2014年12月运维部提供的拨测号码进行了比对，发现确实有号码未在短信营业厅应用侧做拨测号码备案，导致因为上面的问题，短信未被业务侧处理。</p></blockquote>

<h3>业务处理量 与 下行成功量不一致</h3>

<blockquote><p>总部短信营业厅自查业务处理量与下行短信量一致，并且也与网关实时接收短信成功状态一致，需网关侧配合进一步分析原因。</p></blockquote>

<h3>拨测成功量 与 实际成功两不一致</h3>

<blockquote><p>经过沟通，客服部、电子商务部认为伯瓷成功量应为短信下行成功量，网运侧的结果为短信内容与预先匹配的短信模板对应，为成功量。由于当天各省账期，故出现两者不一致的情况。</p></blockquote>

<h2>3. 问题处理方案</h2>

<h3>及时同步拨测号码变动</h3>

<blockquote><p>针对短信营业厅应用侧屏蔽用户号码频繁上行短信的解决方案，短信营业厅去年已经针对网运部提供的拨测号码清单进行了白名单处理，但若拨测号码变动未及时加入白名单，则会被屏蔽。所以，需要总部网运一点及时通过邮件等方式告知短信营业厅拨测号码的变动情况，避免此情况的发生。</p></blockquote>

<h3>加入应用侧对应数据明确各环节指标</h3>

<blockquote><p>目前的拨测数据仅通过拨测设备发送和接收短信作为唯一的数据输入和输出，不容易全面知晓拨测全流程中各节点的实际情况，建议加入网络、网关、应用各节点的指标数据，由第三方(研究院)进行汇总分析，得出拨测结果。</p></blockquote>

<h3>明确各指标口径</h3>

<blockquote><p>目前拨测指标口径各部门理解不一致，建议再次明确各指标口径，并分别统计系统指标、业务指标。</p></blockquote>

<h2>4. 拨测数据汇总</h2>

<table>
<thead>
<tr>
<th>拨测省份</th>
<th>拨测数量</th>
<th>拨测成功数量</th>
<th>拨测接收成功量</th>
<th>成功率</th>
<th>短厅接收请求量</th>
<th>短厅应用处理量</th>
<th>短信应用拦截数据</th>
<th>短厅下行请求量</th>
<th>网关同步接收成功率</th>
</tr>
</thead>
<tbody>
<tr>
<td>北京</td>
<td>212</td>
<td>0</td>
<td>0</td>
<td>0%</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>四川</td>
<td>213</td>
<td>212</td>
<td>8</td>
<td>3.77%  </td>
<td>215</td>
<td>14</td>
<td>201</td>
<td>14</td>
<td>100%</td>
</tr>
<tr>
<td>广东</td>
<td>214</td>
<td>213</td>
<td>26</td>
<td>12.21%</td>
<td>0</td>
<td>215</td>
<td>0</td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>浙江</td>
<td>208</td>
<td>208</td>
<td>9</td>
<td>4.33%</td>
<td>213</td>
<td>11</td>
<td>202</td>
<td>11</td>
<td>100%</td>
</tr>
<tr>
<td>上海</td>
<td>215</td>
<td>215</td>
<td>11</td>
<td>5.12%</td>
<td>214</td>
<td>40</td>
<td>174</td>
<td>40</td>
<td>100%</td>
</tr>
<tr>
<td>辽宁</td>
<td>215</td>
<td>0</td>
<td>0</td>
<td>0%</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>天津</td>
<td>213</td>
<td>209</td>
<td>76</td>
<td>36.36%</td>
<td>212</td>
<td>214</td>
<td>0</td>
<td>214</td>
<td>100%</td>
</tr>
</tbody>
</table>


<pre><code>其中，
拨测数量，拨测成功数量，拨测接收成功量，成功率 为拨测结果数据；
短厅应用处理量，短信应用拦截数据，短厅下行请求量，网关同步接收成功率 为短信营业厅应用侧提取数据
</code></pre>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>短信营业厅提供<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>网运部提供<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>短信营业厅提供<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</body>
</html>